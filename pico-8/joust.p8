pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--joust
--brennan rodriguez


mode = 0
--0 = menu, 1 is play
--2 is p1 victory
--3 is p2 victory
msg = false
debug = false
framecount = 0
players = {}


function _init()
local	p1 = {}
local	p2 = {}
	p1.spr = 1
	p1.x = 0
	p1.y = 63
	p1.score = 0

	p2.spr = 2
	p2.x = 119
	p2.y = 63
	p2.score = 0
	add(players,p1)
	add(players,p2)

	speed = 0.1
	menuitem(1,"reset game",function() mode = 0 p1.score = 0 p2.score = 0 end)
	music()
end


function _update()
	local p1 = getp1()
	local p2 = getp2()
	--main menu mode
	if(mode == 0) then
	if(btnp(0) or btnp(1) or btnp(4) or btnp(5)) reset()

	--p1 victory
elseif(mode == 2) then
		if(btnp(2)) reset() --replay

	--p2 victory
elseif(mode == 3) then
		if(btnp(2)) reset() --replay


	--in game mode
elseif(mode == 1) then
		--game logic
		p1.x += speed
		p2.x -= speed
		framecount += 1
		if(p2.x <= p1.x + 8)then
			--collision, so gameover
			sfx(63,3)

			if(findwinner() == true) then
				mode = 2
				p1.score += 1
			else
				mode = 3
				p2.score += 1
			end

		end

		if(btnp(4)) then
			p1.spr -= 1
			if(p1.spr < 1) p1.spr = 3
			if(p1.spr == p2.spr) p1.spr -= 1
			if(p1.spr < 1) p1.spr = 3
		end

		if(btnp(5)) then
			p1.spr += 1
			if(p1.spr > 3) p1.spr = 1
			if(p1.spr == p2.spr) p1.spr += 1
			if(p1.spr > 3) p1.spr = 1
		end

		if(btnp(0)) then
			p2.spr -= 1
			if(p2.spr < 1) p2.spr = 3
			if(p2.spr == p1.spr) p2.spr -= 1
			if(p2.spr < 1) p2.spr = 3
		end

		if(btnp(1)) then
			p2.spr += 1
			if(p2.spr > 3) p2.spr = 1
			if(p2.spr == p1.spr) p2.spr += 1
			if(p2.spr > 3) p2.spr = 1
		end
	end



end


function _draw()
local p1 = getp1();
local p2 = getp2();
	cls()
	if(mode == 0) then
map(6,0,32,10,8,2)
map(0,0,52,32,3,3)
print("each shape beats the next",0,63,8)
print("change shape:",0,71,12)
print("p1: z and x.",0,79,9)
print("p2: left and right arrow",0,85,10)
print("press any of these keys to start",0,93,11)

print("by: brennan rodriguez",0,109,1)
print("brennanrodriguez.com",0,117,1)

	end
	if(mode == 1) then
		drawplayers()
		map(0,0,52,0,3,3)
		print("p1 score:" .. p1.score, 0,0,12)
		print("p2 score:" .. p2.score, 0,8,11)
		if(findwinner() == true) then
			print("p1 currently winner", 19,32,12)
		else
			print("p2 currently winner", 19,32,11)
		end


	end
	if(mode == 2) then
		print("player 1 winner",0,0,12)
		print("press up to try again",0,8)
	end
	if(mode == 3) then
		print("player 2 winner",0,0,11)
		print("press up to try again",0,8)
	end

	if(debug == true)then
		print("fc"..framecount, 0,100,7)
	end
end
-->8
--enviroment

-->8
--utility

function drawplayers()
	for i=1,count(players) do
		spr(players[i].spr, players[i].x, players[i].y)

	end
end
--returns true if p1 is winner and false if p2 is winner
function findwinner()
	local p1 = getp1()
	local p2 = getp2()
	if(p1.spr == 1) then
		if(p2.spr == 2) return false
		if(p2.spr == 3) return true
	elseif(p1.spr == 2) then
		if(p2.spr == 1)  return true
		if(p2.spr == 3) return false
	elseif(p1.spr == 3) then
		if(p2.spr == 1) return false
		if(p2.spr == 2)  return true
	end
end

function reset()
	local p1 = getp1()
	local p2 = getp2()
	p1.spr = 1
	p1.x = 0
	p1.y = 63


	p2.spr = 2
	p2.x = 119
	p2.y = 63

	speed = 0.5
	mode = 1
	sfx(62,3)
end

-->8
--player

function getp1()
	return players[1]
end

function getp2()
	return players[2]
end
__gfx__
00000000888888880000000000bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000088888888000000000bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070088888888000cc000bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008888888800cccc00bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770008888888800cccc00bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700888888880cccccc0bbbbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880cccccc00bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000088888888cccccccc00bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007777000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000077000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000707007000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00007007070000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070000777777770000700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000070000000000070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000007000000000007700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0000088000000000000000000000888888000888888888800000000000000000000000000
000000000000000000000000000000000000000000000000000008a000089a800008900a80000000008aaaaaa000aaaa89aaaa00000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a8000000008a000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000008a0000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000008a0000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000008a0000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000008a0000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000008a0000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a8000000008a000000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a80000000008a00000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000008a0008900a80008900a800000000098a0000000000089000000000000000000000000000000
000000000000000000000000000000000000000000000000000088a0008900a80008900a8000000000098a000000000089000000000000000000000000000000
00000000000000000000000000000000000000000000000000008a00008900a80008900a80000000000980000000000089000000000000000000000000000000
00000000000000000000000000000000000000000000000000088a00008900a80008900a80000000000980000000000089000000000000000000000000000000
0000000000000000000000000000000000000000000008888888a00000089a80000089a800009999999800000000000089000000000000000000000000000000
00000000000000000000000000000000000000000000099999990000000088000000088000008888888000000000000089000000000000000000000000000000
__map__
00010000000000464748494a4b4c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
10001200000055565758595a5b5c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0211030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000000203002020020100203002020020100203002020050300502005010050300502005010050300502004030040200401004030040200401004030050300203002020020100203002020020100203002030
011000000e030000000e0301103000000110300000013030130300000013030000001003000000100300c05011030000001103000000100300c03011030100300000010050000001005000000100300e05000000
011000001a0301d030210301a0301d0301f030000001a0301d0001a030210301a0301d0301f030000001a0301a0301d030210301a0301d0301f030000001d030000001d030000001c030000001c0301a03000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000000055102551045510555107551095510b5510c5510e5511055111551135511555117551185511a5511c5511d5511f5512155123551245512655128551295512b5512d5512f55100501000000000000000
011000000c6610c6510c6410c63100601006010060100601006010060100601006010060100601006010060100601006010060100601006010060100601006010060100601006010060100601006010060100601
__music__
01 0102437b
02 01020344
